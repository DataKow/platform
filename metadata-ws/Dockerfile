FROM openjdk:11-jdk
COPY target/metadata-ws.jar /opt/datakow/

ARG CONFIG_SERVER_HOST=config-server
ARG CONFIG_SERVER_PORT=8888
ARG GRAYLOG_SERVER_HOST=udp:graylog
ARG GRAYLOG_SERVER_PORT=12201
ARG EUREKA_DEFAULT_ZONE=http://eureka-server:8761/eureka/

ENV CONFIG_SERVER_HOST=${CONFIG_SERVER_HOST}
ENV CONFIG_SERVER_PORT=${CONFIG_SERVER_PORT}
ENV GRAYLOG_SERVER_HOST=${GRAYLOG_SERVER_HOST}
ENV GRAYLOG_SERVER_PORT=${GRAYLOG_SERVER_PORT}
ENV EUREKA_DEFAULT_ZONE=${EUREKA_DEFAULT_ZONE}


EXPOSE 8081
ENTRYPOINT ["java","-jar", "/opt/datakow/metadata-ws.jar"]